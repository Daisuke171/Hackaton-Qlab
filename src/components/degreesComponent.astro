---
const careers = [
  { id: "ing-informatica", name: "Tecnicatura Universitaria en Programación" },
  { id: "ing-electrica", name: "Ingeniería en Energía Eléctrica" },
  { id: "ing-automotriz", name: "Ingeniería en Energía Eléctrica" },
];

let open = false;
let query = "";

function toggle() {
  open = !open;
}

function onSearch(e) {
  query = e.target.value.toLowerCase();
}

function filtered(list) {
  if (!query) return list;
  return list.filter(
    (c) => c.name.toLowerCase().includes(query) || c.id.includes(query)
  );
}
---

<section class="careers-sec" aria-label="Menú de Carreras">
  <div class="nav-inner">
   <h1>UTN General Pacheco</h1>>

    <div class="controls">
      <label class="search">
        <input
          type="search"
          placeholder="Buscar carrera..."
          value={query}
          onInput={onSearch}
          aria-label="Buscar carreras"
          aria-placeholder="Buscar Carrera..."
        />
        
      </label>

      <button
        class="burger"
        aria-expanded={open}
        aria-label="Abrir menú"
        onClick={toggle}
      >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden>
          <path
            d="M4 7h16M4 12h16M4 17h16"
            stroke="currentColor"
            stroke-width="1.6"
            stroke-linecap="round"></path>
        </svg>
      </button>
    </div>
  </div>

  <div class={`menu ${open ? "open" : ""}`}>
    <div class="menu-panel">
      <h2 class="menu-title">Carreras</h2>
      <ul class="careers-list">
        {
          filtered(careers).map((c) => (
            <li key={c.id} class="career-item">
              <a href={`/courses/${c.id}`} class="career-link">
                {c.name}
              </a>
            </li>
          ))
        }
      </ul>

      <div class="help">
        <a href="/carreras/todas" class="all-link">Ver todas las carreras</a>
      </div>
    </div>
  </div>
</section>

<style>
  :root {
    --bg: rgba(255, 255, 255, 0.7);
    --glass: rgba(255, 255, 255, 0.6);
    --accent: #4f46e5; /* indigo */
    --muted: #6b7280;
    --card-shadow: 0 6px 20px rgba(16, 24, 40, 0.08);
  }

  .careers-sec {
    position: relative;
    backdrop-filter: blur(6px) saturate(110%);
    background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.8),
      rgba(255, 255, 255, 0.6)
    );
    border-radius: 12px;
    box-shadow: var(--card-shadow);
    padding: 2rem 4rem;
    max-width: 1100px;
    margin: 4rem auto;
  }

  .nav-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }

  .brand {
    font-weight: 700;
    font-size: 1.05rem;
    color: #0f172a;
    text-decoration: none;
  }

  .controls {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  .search {
    border: solid 1px rgba(15, 23, 42, 0.74);
    border-radius: 10px;
  }

  .search input {
    border: 1px solid rgba(15, 23, 42, 0.06);
    padding: 8px 12px;
    border-radius: 10px;
    min-width: 180px;
    outline: none;
    transition:
      box-shadow 0.12s ease,
      transform 0.08s ease;
  }
  .search input:focus {
    box-shadow: 0 6px 18px rgba(79, 70, 229, 0.12);
    transform: translateY(-1px);
  }

  .burger {
    display: inline-grid;
    place-items: center;
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 8px;
    border-radius: 8px;
  }
  .burger:focus {
    outline: 3px solid rgba(79, 70, 229, 0.18);
  }

  .menu {
    max-height: 0;
    overflow: hidden;
    transition:
      max-height 0.32s cubic-bezier(0.2, 0.9, 0.3, 1),
      padding 0.18s ease;
  }
  .menu.open {
    max-height: 400px;
    padding-top: 12px;
  }

  .menu-panel {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
    align-items: start;
  }

  .menu-title {
    font-size: 0.95rem;
    margin: 0 0 4px 0;
    color: #0f172a;
  }

  .careers-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 8px;
  }

  .career-item {
    background: var(--glass);
    padding: 10px 12px;
    border-radius: 10px;
    border: 1px solid rgba(15, 23, 42, 0.04);
  }

  .career-link {
    text-decoration: none;
    color: #0f172a;
    font-weight: 600;
    display: inline-block;
  }
  .career-link:hover {
    color: var(--accent);
    transform: translateX(4px);
    transition:
      transform 0.12s ease,
      color 0.12s ease;
  }

  .help {
    margin-top: 6px;
  }
  .all-link {
    font-size: 0.9rem;
    color: var(--muted);
    text-decoration: none;
  }
  .all-link:hover {
    color: var(--accent);
  }

  /* Responsive: show menu always on wider screens */
  @media (min-width: 900px) {
    .menu {
      max-height: none !important;
      padding-top: 12px;
    }
    .burger {
      display: none;
    }
    .search input {
      min-width: 260px;
    }
  }

  .sr-only {
    position: absolute !important;
    height: 1px;
    width: 1px;
    overflow: hidden;
    clip: rect(1px, 1px, 1px, 1px);
    white-space: nowrap;
  }
</style>
